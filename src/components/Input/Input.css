/* CONTAINER */
/* Stile per il contenitore principale dell'input */
.container {
  --accent-color: light-dark(
    var(--color-gray-9),
    var(--color-gray-1)
  ); /* Colore di accento per il bordo */
  --bcg-color: light-dark(
    white,
    var(--color-gray-12)
  ); /* Colore di sfondo dinamico in base al tema */
  display: grid; /* Dispone gli elementi figli in una griglia */
  grid-template-rows: repeat(3, auto); /* 3 righe con altezza automatica */
  grid-template-columns: calc(24rem / 16) auto calc(24rem / 16); /* 3 colonne: stretta, flessibile, stretta */
  margin-bottom: 1em; /* Spazio inferiore */
  position: relative; /* Necessario per posizionare l'icona */
  padding: 0.25em; /* Padding per evitare che il contenuto tocchi i bordi */
  border-radius: 0.25em; /* Bordi arrotondati uniformi */

  &:where(.radio) {
    display: flex; /* Se .container ha anche la classe .radio, usa flex al posto di grid */
    flex-direction: column; /* Dispone i figli in colonna */
  }
}

/* LABEL */
/* Stile per l'etichetta dell'input */
:is(label, .label) {
  color: light-dark(
    var(--color-gray-9),
    var(--color-gray-1)
  ); /* Colore dinamico in base al tema */
  grid-row: 1/2; /* Etichetta sulla prima riga */
  grid-column: 1/4; /* Occupa tutte e tre le colonne */
  font-weight: 800; /* Testo in grassetto */
  cursor: pointer; /* Cursor a forma di mano */
  font-size: var(
    --font-size-sm
  ); /* Usa la dimensione testo definita nel tema */
  margin-bottom: 0.25em; /* Piccolo spazio sotto l'etichetta */
}

/* INPUT */
/* Stile per gli input e i select */

.input-container {
  display: grid; /* Dispone gli elementi figli in una griglia */
  grid-template-rows: subgrid; /* Usa subgrid per allinearsi con il contenitore principale */
  grid-row: 2/3; /* Campo input nella seconda riga */
  grid-column: 1/4; /* Occupa tutta la larghezza disponibile */
  border: 1px solid var(--accent-color); /* Bordo grigio chiaro */
  border-radius: 0.25em; /* Arrotonda gli angoli */

  &:has(input[type="radio"]) {
    display: flex; /* Se contiene un input radio, usa flex */
    gap: var(--spacing-md); /* Spazio tra gli input radio */
    border: none; /* Rimuove il bordo */

    label {
      display: flex; /* Etichetta come flex per allineare l'input radio */
      align-items: center; /* Allinea verticalmente l'input radio */
      gap: var(--spacing-xs); /* Spazio tra input radio e etichetta */
    }
  }
}

input:not([type="radio"]),
select {
  min-height: calc(28rem / 16); /* Altezza minima uniforme */
  border: none; /* Rimuove il bordo di default */
  border-radius: 0.25em; /* Arrotonda gli angoli */
  background-color: var(--bcg-color); /* Colore di sfondo dinamico */
}

:where(input, select):focus {
  outline: none; /* Rimuove il contorno di default al focus */
}

.input-container:has(:where(input, select):focus-visible) {
  outline: 2px solid light-dark(var(--color-gray-9), var(--color-gray-1)); /* Contorno visibile al focus */
  border-radius: 0.25em; /* Arrotonda gli angoli del contorno */
}

/* SELECT */
/* Stile specifico per i select */
select {
  border-radius: 025em;
}
/* ICON */
/* Stile per le icone all'interno dell'input */
.icon {
  grid-row: 2/3; /* Posizionamento verticale accanto all'input */
  grid-column: 3/4; /* Di default, l’icona è a destra */
  display: flex; /* Centro contenuto dentro l’icona */
  align-items: center; /* Allinea verticalmente */
  justify-content: center; /* Allinea orizzontalmente */
  width: calc(24rem / 16); /* Larghezza icona coerente con il padding */
  pointer-events: none; /* L'icona non deve interferire con l'interazione dell'input */
  background-color: var(--bcg-color); /* Colore di sfondo dinamico */
  border-radius: 0 0.25em 0.25em 0; /* Bordo arrotondato coerente a destra */

  &:where(.left) {
    grid-column: 1/2; /* Se ha la classe .left, posizionala a sinistra */
    border-radius: 0.25em 0 0 0.25em; /* Bordo arrotondato coerente a sinistra */
  }

  > svg {
    width: 1rem; /* Dimensione icona SVG */
    height: 1rem;
  }
}

.container:has(.icon) input:not([type="radio"]) {
  padding-right: calc(
    24rem / 16
  ); /* Aggiunge padding a destra se c'è un'icona (eccetto per radio) */
}

.container:has(.icon.left) input:not([type="radio"]) {
  padding-left: calc(
    24rem / 16
  ); /* Se l’icona è a sinistra, padding a sinistra */
  padding-right: 0.25em; /* Piccolo padding a destra per uniformità */
}

/* ERROR TEXT */
/* Stile per il testo di errore sotto l'input */
.error-text {
  color: light-dark(
    var(--color-red-9),
    var(--color-red-4)
  ); /* Colore rosso per il testo di errore */
  font-size: var(--font-size-sm); /* Dimensione del testo di errore */
  margin-top: 0.5em; /* Spazio sopra il testo di errore */
  grid-row: 3/4; /* Posiziona il testo di errore nella terza riga */
  grid-column: 1/4; /* Occupa tutta la larghezza disponibile */
  display: none;
}

.container:where(.is-invalid) {
  --accent-color: var(
    --color-red-9
  ); /* Colore di accento rosso per input non validi */
  .error-text {
    display: block; /* Mostra il testo di errore se l'input è invalido */
  }
}

/* DISABLED STATE */
/* Stile per gli input disabilitati */
.container:has([disabled]) {
  --accent-color: light-dark(
    var(--color-gray-1),
    var(--color-gray-12)
  ); /* Colore di accento grigio per input disabilitati */
  --bcg-color: light-dark(
    var(--color-gray-1),
    var(--color-gray-9)
  ); /* Colore di sfondo grigio per input disabilitati */

  .icon svg {
    opacity: 0.5; /* Disattiva visivamente l’icona */
  }

  .icon svg {
    opacity: 0.5; /* Icona meno visibile */
  }
}
